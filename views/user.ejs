<% include ./partials/header %>

    <!DOCTYPE html>
    <html>

    <head>
        <title>Simple Map</title>
        <meta name="viewport" content="initial-scale=1.0">
        <meta charset="utf-8">
        <script type="text/javascript" src="/js/main.js"></script>
        <style>
            body {
                margin: 0;
            }

            .topnav {
                overflow: hidden;
                background-color: #333;
            }

            .topnav a {
                float: left;
                color: #f2f2f2;
                text-align: center;
                padding: 14px 16px;
                text-decoration: none;
                font-size: 17px;
            }

            .topnav a:hover {
                background-color: #ddd;
                color: black;
            }

            .topnav a.active {
                background-color: #4CAF50;
                color: white;
            }

            /* Always set the map height explicitly to define the size of the div
       * element that contains the map. */

            #map {
                height: 100%;
            }

            /* Optional: Makes the sample page fill the window. */

            html,
            body {
                height: 100%;
                margin: 0;
                padding: 0;
            }
        </style>

    </head>

    <body>
        <div class="topnav">
            <div class="container">
                <div class="row">
                    <div class="col-md">
                        <a href="/userchild">Child</a>
                    </div>
                    <div class="col-md">
                        <a href="/profile">Profile</a>
                    </div>
                    <div class="col-md">
                        <a href="/alert">Alert</a>
                    </div>
                    <div class="col-md">
                        <a href="/settings">Settings</a>
                    </div>
                    <div class="col-md">
                        <a href="/record">Record</a>
                    </div>
                    <div class="col-md-6">
                        <a href="/about">About</a>
                    </div>
                    <div class="col-md">
                        <a href="/logout">
                            <span class="glyphicon glyphicon-user"></span> Logout</a>
                    </div>
                </div>
            </div>
        </div>



        <%  if(children != null) { %>
            <h2 id="headtag">List of children </h2>
            <table border='1' style="empty-cells:hide" ;width='650' id="resulttable">
                <thead>
                    <tr>
                        <th class="hidden">ChildID</th>
                        <th>ChildName</th>
                        <th>Gender</th>
                        <th>Phonenumber</th>
                        <th>ChildEmail</th>

                    </tr>
                </thead>


                <% children.forEach(function(record) { %>
                    <tr>
                        <td class="hidden">
                            <%=record.objectId%>
                        </td>
                        <td>
                            <%=record.childFirstName+record.childLastName%>
                        </td>
                        <td>
                            <%=record.childGender%>
                        </td>
                        <td>
                            <%=record.childPhone%>
                        </td>
                        <td>
                            <%=record.childEmail%>
                        </td>

                    </tr>
                    <% }); %>
            </table>
            <% } %>
                <br>
                <h2>Current Location</h2>
                </div>
                <div class="col-md-3"></div>
                <div class="col-md-6" id="map"></div>
                <div class="col-md-3"></div>

                <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyB3RaBAQdDLeYcpum-bTxVMvCuGvenG_SQ&callback=initMap" async
                    defer></script>

                <% include ./partials/footer %>
    </body>
    <script>
        $("#resulttable tr").click(function () {
            alert("hi");
            var childObjectID_ToPost = $(this).children("td").html();
            var data = {};
            data.childObjectID = $(this).children("td").html().trim();
            $.post('http://localhost:4002/welcome', data,
                function (data, status) {
                    var parseData = $.parseJSON(data);
                    console.log('success' + parseData);
                });
        });
    </script>

    </html>